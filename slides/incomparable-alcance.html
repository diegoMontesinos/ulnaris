
<!-- INCOMPARABLE ALCANCE -->
<section id="incomparable-alcance" data-autoslide="100" data-state="incomparable-alcance-state">
	<div class="step-container">

		<!-- TITULO -->
		<div class="ulnaris-title" style="top: 0px; font-size: 50px !important;">
			<span>Incomparable Alcance Global</span>
		</div>

		<!-- MAPA -->
		<div id="mapa-incomparable-alcance">
			<img src="img/mapa.png">
		</div>

		<!-- CIRCULOS -->
		<div id="circles-incomparable-alcance"></div>
	</div>
</section>

<style type="text/css">
	#incomparable-alcance text {
		font-weight: bold;
		font-size: 18px;
		fill: #FFF;
	}
</style>

<script type="text/javascript">
	(function () {
		var circles = [
			{ x: 608, y: 166}, { x: 635, y: 156},
			{ x: 670, y: 163}, { x: 608, y: 166},
			{ x: 635, y: 156}, { x: 670, y: 163},
			{ x: 1199, y: 563}, { x: 1107, y: 550},
			{ x: 999, y: 298}, { x: 978, y: 329},
			{ x: 982, y: 443}, { x: 961, y: 422},
			{ x: 937, y: 396}, { x: 943, y: 369},
			{ x: 854, y: 368}, { x: 827, y: 323},
			{ x: 781, y: 343}, { x: 756, y: 339},
			{ x: 727, y: 324}, { x: 709, y: 297},
			{ x: 681, y: 318}, { x: 682, y: 536},
			{ x: 678, y: 272}, { x: 647, y: 248},
			{ x: 641, y: 230}, { x: 639, y: 208},
			{ x: 617, y: 196}, { x: 597, y: 204},
			{ x: 574, y: 208}, { x: 590, y: 223},
			{ x: 611, y: 221}, { x: 605, y: 244},
			{ x: 627, y: 242}, { x: 627, y: 269},
			{ x: 579, y: 248}, { x: 572, y: 275},
			{ x: 550, y: 272}, { x: 422, y: 476},
			{ x: 345, y: 567}, { x: 330, y: 459},
			{ x: 341, y: 398}, { x: 304, y: 310},
			{ x: 350, y: 251}, { x: 313, y: 236},
			{ x: 295, y: 241}, { x: 267, y: 274},
			{ x: 265, y: 293}, { x: 288, y: 321},
			{ x: 234, y: 302}, { x: 236, y: 329},
			{ x: 178, y: 289}, { x: 160, y: 224}
		];

		var cities = [
			{ x: 367, y: 207, name: "Canadá" }, { x: 303, y: 264, name: "Estados Unidos" },
			{ x: 313, y: 307, name: "Miami" }, { x: 154, y: 334, name: "México" },
			{ x: 348, y: 410, name: "Colombia" }, { x: 268, y: 483, name: "Perú" },
			{ x: 372, y: 513, name: "Brasil" }, { x: 281, y: 582, name: "Chile" },
			{ x: 681, y: 91, name: "Austria" }, { x: 683, y: 112, name: "Bélgica" },
			{ x: 680, y: 136, name: "Dinamarca" }, { x: 681, y: 159, name: "Finlandia" },
			{ x: 681, y: 184, name: "Francia" }, { x: 682, y: 204, name: "Alemania" },
			{ x: 682, y: 228, name: "Hungría" }, { x: 683, y: 251, name: "Italia" },
			{ x: 804, y: 89, name: "Países Bajos" }, { x: 802, y: 114, name: "Noruega" },
			{ x: 801, y: 137, name: "Polonia" }, { x: 803, y: 159, name: "Portugal" },
			{ x: 802, y: 182, name: "Eslovaquia" }, { x: 803, y: 205, name: "España" },
			{ x: 804, y: 226, name: "Suecia" }, { x: 803, y: 248, name: "Suiza" },
			{ x: 803, y: 271, name: "Reino Unido" }, { x: 675, y: 365, name: "Egipto" },
			{ x: 672, y: 387, name: "Israel" }, { x: 673, y: 408, name: "Turquía" },
			{ x: 673, y: 432, name: "Libano" }, { x: 673, y: 453, name: "Emiratos Árabes Unidos" },
			{ x: 674, y: 547, name: "Sudáfrica" }, { x: 843, y: 356, name: "India" },
			{ x: 847, y: 388, name: "Malasia" }, { x: 851, y: 413, name: "Singapur" },
			{ x: 872, y: 439, name: "Indonesia" }, { x: 1012, y: 310, name: "China" },
			{ x: 985, y: 335, name: "Hong Kong" }, { x: 957, y: 375, name: "Tailandia" },
			{ x: 1137, y: 515, name: "Australia"}
		];

		// SVG
		var svg = d3.select("#circles-incomparable-alcance").append("svg")
		.attr("width", 1260)
		.attr("height", 630);

		// Agrega nodos
		var node = svg.selectAll(".node")
		.data(circles);

		node.enter().append("g")
		.attr("class", "node")
		.attr("transform", function (data) {
			return "translate(" + data.x + "," + data.y + ")";
		});

		// Circulo
		node.append("path")
		.style("stroke-width", "6")
		.style("stroke", "rgb(255,0,0)")
		.attr("d", function (data) {
			return describeArc(0, 0, 1, 0, 359);
		});

		// Texto
		var textNode = svg.selectAll(".node-text")
		.data(cities);

		textNode.enter().append("g")
		.attr("class", "node")
		.attr("transform", function (data) {
			return "translate(630,315)";
		})

		textNode.append("text")
		.text(function (data) {
			return data.name;
		})

		// Cada vez que se muestra la diapositiva
		Reveal.addEventListener('incomparable-alcance-state', function() {

			// Reseteamos
			node.selectAll("path")
			.attr("d", function (data) {
				return describeArc(0, 0, 1, 0, 359);
			});
			textNode
			.attr("transform", function (data) {
				return "translate(630,315)";
			})

			// Animamos
			node.selectAll("path")
			.transition()
			.delay(800)
			.duration(1000)
			.attr("d", function (data) {
				return describeArc(0, 0, 11, 0, 359);
			});

			textNode
			.transition()
			.delay(800)
			.duration(1000)
			.attr("transform", function (data) {
				return "translate(" + (data.x + 10) + "," + (data.y + 20) + ")";
			})
		}, false);

		function polarToCartesian(centerX, centerY, radius, angleInDegrees) {
			var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;

			return {
				x: centerX + (radius * Math.cos(angleInRadians)),
				y: centerY + (radius * Math.sin(angleInRadians))
			};
		}

		function describeArc(x, y, radius, startAngle, endAngle) {
			var start = polarToCartesian(x, y, radius, endAngle);
			var end = polarToCartesian(x, y, radius, startAngle);
			var arcSweep = endAngle - startAngle <= 180 ? "0" : "1";
			var d = [
				"M", start.x, start.y,
				"A", radius, radius, 0, arcSweep, 0, end.x, end.y
			].join(" ");

		    return d;
		}
	})();
</script>